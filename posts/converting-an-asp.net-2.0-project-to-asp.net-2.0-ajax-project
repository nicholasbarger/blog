{"id":"converting-an-asp.net-2.0-project-to-asp.net-2.0-ajax-project","title":"Converting an ASP.NET 2.0 project to ASP.NET 2.0 AJAX project","description":"","link":"http://nicholasbarger.com/2009/03/04/converting-an-asp-net-2-0-project-to-asp-net-2-0-ajax-project/","pubDate":"2009-03-04T23:40:56.000Z","content":"This is nothing new and certainly something you can find all over the internet, however, I wanted to have a local record of it for times when I need to remember all of the steps involved for converting (relatively) older web-applications.I've used this set of instructions recently to convert an older application to use AJAX (but a requirement indicated that it remain ASP.NET 2.0 and not fully upgraded to the latest version of ASP.NET (current 3.5 at the time of this posting).  So the instructions should be pretty solid at this point.  Please feel free to add any additional \"gotcha's\" or information on converting ASP.NET applications in the comments below if you would like.<p style=\"background-color:#ffffcc;border:1px solid #CCC;padding:3px;\">In case you're just skimming this article, please be aware this is geared for ASP.NET 2.0, which is NOT the most recent version of ASP.NET, Ajax, or the Ajax Control Toolkit.  So if you're intending to upgrade to 3.5 (or anything later), please make sure to pick up the latest files and, if necessary, instructions.</p><h2>Step 1: Software</h2>First, we need to install ASP.NET 2.0 Ajax 1.0 Extensions.  This file can be downloaded from Microsoft <a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=ca9d90fa-e8c9-42e3-aa19-08e2c027f5d6&amp;displaylang=en\" target=\"_blank\">here</a>.  No big deal here, simply download and install the package.<em>Note: You may also want to download the AJAX Control Toolkit for ASP.NET 2.0 for additional controls, this can be found <a href=\"http://ajaxcontroltoolkit.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=11121\" target=\"_blank\">here</a>.</em><h2>Step 2: Project References</h2>In your web application project, add the following references to your project:<ul><li>System.Web.Extensions</li><li><em>optionally: AjaxControlToolkit.dll</em> - I generally pull this from the SampleWebSite\\bin directory included in the Ajax Control Toolkit download.</li></ul>You will also need to add the following page reference when using Ajax Script Manager and Ajax-specific controls on each page containing these controls (or a masterpage):<div class=\"html_block\"><pre>&lt;%@Register Assembly=\"System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"    Namespace=\"System.Web.UI\" TagPrefix=\"asp\" %&gt;</pre></div><h2>Step 3: Web.config</h2>This is where the bulk of the work is, but don't worry - it's all cut and paste.<strong>Inside &lt;configSections&gt;&lt;/configSections&gt;:</strong><div class=\"xml_block\"><pre>&lt;sectionGroup name=\"system.web.extensions\" type=\"System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"&gt;      &lt;sectionGroup name=\"scripting\" type=\"System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"&gt;        &lt;section name=\"scriptResourceHandler\" type=\"System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;        &lt;sectionGroup name=\"webServices\" type=\"System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"&gt;          &lt;section name=\"jsonSerialization\" type=\"System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" allowDefinition=\"Everywhere\"/&gt;          &lt;section name=\"profileService\" type=\"System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;          &lt;section name=\"authenticationService\" type=\"System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;        &lt;/sectionGroup&gt;      &lt;/sectionGroup&gt;&lt;/sectionGroup&gt;</pre></div><strong>Add below &lt;compilation&gt;&lt;/compilation:</strong><div class=\"xml_block\"><pre>&lt;httpHandlers&gt;      &lt;remove verb=\"*\" path=\"*.asmx\"/&gt;      &lt;add verb=\"*\" path=\"*.asmx\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;      &lt;add verb=\"*\" path=\"*_AppService.axd\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;      &lt;add verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" validate=\"false\"/&gt;&lt;/httpHandlers&gt;</pre></div><strong>Add inside &lt;httpModules&gt;&lt;/httpModules&gt;:</strong><div class=\"xml_block\"><pre>&lt;add name=\"ScriptModule\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;</pre></div><strong>Add below &lt;/system.web&gt;:</strong><div class=\"xml_block\"><pre>&lt;system.web.extensions&gt;    &lt;scripting&gt;      &lt;webServices&gt;        &lt;!-- Uncomment this line to customize maxJsonLength and add a custom converter --&gt;        &lt;!--&lt;jsonSerialization maxJsonLength=\"500\"&gt;&lt;converters&gt;&lt;add name=\"ConvertMe\" type=\"Acme.SubAcme.ConvertMeTypeConverter\"/&gt;&lt;/converters&gt;&lt;/jsonSerialization&gt;--&gt;        &lt;!-- Uncomment this line to enable the authentication service. Include requireSSL=\"true\" if appropriate. --&gt;        &lt;!--&lt;authenticationService enabled=\"true\" requireSSL = \"true|false\"/&gt;--&gt;        &lt;!-- Uncomment these lines to enable the profile service. To allow profile properties to be retrievedand modified in ASP.NET AJAX applications, you need to add each property name to the readAccessProperties andwriteAccessProperties attributes. --&gt;        &lt;!--&lt;profileService enabled=\"true\"readAccessProperties=\"propertyname1,propertyname2\"writeAccessProperties=\"propertyname1,propertyname2\" /&gt;--&gt;      &lt;/webServices&gt;      &lt;!--&lt;scriptResourceHandler enableCompression=\"true\" enableCaching=\"true\" /&gt;--&gt;    &lt;/scripting&gt;  &lt;/system.web.extensions&gt;</pre></div><strong>Add below &lt;/system.web.extensions&gt;:</strong><div class=\"xml_block\"><pre>&lt;system.webServer&gt;    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;    &lt;modules&gt;      &lt;add name=\"ScriptModule\" preCondition=\"integratedMode\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;    &lt;/modules&gt;    &lt;handlers&gt;      &lt;remove name=\"WebServiceHandlerFactory-Integrated\"/&gt;      &lt;add name=\"ScriptHandlerFactory\" verb=\"*\" path=\"*.asmx\" preCondition=\"integratedMode\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;      &lt;add name=\"ScriptHandlerFactoryAppServices\" verb=\"*\" path=\"*_AppService.axd\" preCondition=\"integratedMode\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;      &lt;add name=\"ScriptResource\" preCondition=\"integratedMode\" verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;    &lt;/handlers&gt;  &lt;/system.webServer&gt;</pre></div><h3>At Least One Gotcha</h3>Whenever you deal with web.config settings, especially for pre-existing websites/webapplications, there couldbe settings that may conflict with new functionality provided with AJAX; one that I ran into was the following tag:<strong>&lt;xhtmlConformance mode=\"Legacy\"/&gt;</strong>This tag needs to be commented out or set to a different mode (Transitional, Strict).  You can read more about it from <a href=\"http://weblogs.asp.net/scottgu/archive/2006/12/10/gotcha-don-t-use-xhtmlconformance-mode-legacy-with-asp-net-ajax.aspx\" target=\"_blank\">Scott Guthrie's post</a>, or simply comment it out and move on.<em>Note: Scott Guthrie has <a href=\"http://weblogs.asp.net/scottgu/pages/ASP.NET-2.0-Tips_2C00_-Tricks_2C00_-Recipes-and-Gotchas.aspx\" target=\"_blank\">another post on gotcha's</a> for Ajax as well as Visual Studio, UI, and other general Microsoft Developer gotcha's, it's certainly worth a few minutes to check out.</em>"}