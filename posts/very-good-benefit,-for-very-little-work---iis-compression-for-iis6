{"id":"very-good-benefit,-for-very-little-work---iis-compression-for-iis6","title":"Very good benefit, for very little work - IIS Compression for IIS6","description":"","link":"http://nicholasbarger.com/2008/10/27/very-good-benefit-for-very-little-work-iis-compression-for-iis6/","pubDate":"2008-10-27T18:39:25.000Z","content":"<p>I've seen quite frequently that many applications have not implemented compression.  I personally, think it's great, simply because processor power is fairly cheap and the faster I can deliver content to my users the better.  To me, the negligible difference in processing power is definately worth the increase in user experience when pages load sometimes 2 to 3 times faster.</p>    <p>Before we get started, I think it would be beneficial to take a trip to a compression reporting service to see if your server is currently using compression and if not, what potential benefit you would most likely receive.  These compression reports are usually free and only require a URL to do the analysis.  I have used <a href=\"http://pipeboost.com/report.asp\" target=\"_blank\">PipeBoost</a> in the past to display compression reports.</p>    <p>Ok, now that you can quantify the potential benefit, let's get started by showing you my personal settings for IIS compression.  Many thanks to Frendy who originally turned me on to the benefits of IIS compression and allowing Microsoft's IIS compression engine to do all the work rather than writing my own HTTP modules for it.</p>    <p>Keep in mind, for your own application you may want to have different settings than what I've chosen.  I will not go into the detail of each setting, however, this should give you a jumping point to dive a little deeper for your particular application.</p>        <h2>Changing IIS to Enable Compression</h2>    <p>The first change needs to be made by going to:</p>    <p><i>IIS Manager &gt; Right click on Web Sites &gt; Click Properties &gt; Click the Service Tab</i></p>    <p>Change the screen to look similar to the following (Checkmark Compress application files and Compress static files):</p>    <img src=\"http://nbarger.files.wordpress.com/2010/01/website_properties.jpg\" alt=\"Website Properties in IIS\" />        <h2>Changing the Metabase.xml</h2>    <p>Next, we want to change the metabase.xml file to direct IIS on the compression scheme we want to use.  I set up schemes for both gzip and deflate (though gzip is most often used I believe).</p>    <p>You will want to add the following section to your metabase.xml file directly below the &lt;IIsFilter&gt;&lt;/IIsFilter&gt; section.</p>    <p><i>Note: This may already be there, if so, simply review the values and match them up appropriately.</i></p>    <div class=\"xml_block\">    <pre>&lt;IIsCompressionScheme\tLocation =\"/LM/W3SVC/Filters/Compression/deflate\"\tHcCompressionDll=\"%windir%\\system32\\inetsrv\\gzip.dll\"\tHcCreateFlags=\"0\"\tHcDoDynamicCompression=\"TRUE\"\tHcDoOnDemandCompression=\"TRUE\"\tHcDoStaticCompression=\"FALSE\"\tHcDynamicCompressionLevel=\"9\"\tHcFileExtensions=\"htm\t\thtml\t\ttxt\t\tjs\t\tcss\"\tHcOnDemandCompLevel=\"10\"\tHcPriority=\"1\"\tHcScriptFileExtensions=\"asp\t\tdll\t\texe\t\taspx\t\tasmx\t\tashx\t\tasbx\t\taxd\"&gt;&lt;/IIsCompressionScheme&gt;&lt;IIsCompressionScheme\tLocation =\"/LM/W3SVC/Filters/Compression/gzip\"\tHcCompressionDll=\"%windir%\\system32\\inetsrv\\gzip.dll\"\tHcCreateFlags=\"1\"\tHcDoDynamicCompression=\"TRUE\"\tHcDoOnDemandCompression=\"TRUE\"\tHcDoStaticCompression=\"TRUE\"\tHcDynamicCompressionLevel=\"9\"\tHcFileExtensions=\"htm\t\thtml\t\ttxt\t\tjs\t\tcss\"\tHcOnDemandCompLevel=\"10\"\tHcPriority=\"1\"\tHcScriptFileExtensions=\"asp\t\tdll\t\texe\t\taspx\t\tasmx\t\tashx\t\tasbx\t\taxd\"&gt;&lt;/IIsCompressionScheme&gt;           </pre>    </div>        <p>That's all there is to it.  You should get a pretty strong benefit from compression depending on your particular setup; hope this helps!</p>"}